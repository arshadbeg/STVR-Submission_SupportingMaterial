/* Generated by Frama-C */
void pathcrawler_trace_full(char *format, char *comm , ...);

extern int pathcrawler_assert_exception(char *file, int line);

void __FC_assert(int c, char *file, int line, char const *cond)
{
  pathcrawler_assert_exception(file,line);
  return;
}

int partition(int *arr, int low, int high)
{
  int __retres;
  int pivot = *(arr + high);
  int i = low - 1;
  int j = low;
  while (1) {
    if (j < high) {
      pathcrawler_trace_full("+312","l.5, file ksmallest.c");
      goto lin_for_body_2;
    }
    else {
      pathcrawler_trace_full("-312","l.5, file ksmallest.c");
      goto lin_for_break_1;
    }
    lin_for_body_2:
    if (*(arr + j) <= pivot) {
      pathcrawler_trace_full("+317","l.6, file ksmallest.c");
      lin_ite_body_7:
      {
        i ++;
        int temp = *(arr + i);
        *(arr + i) = *(arr + j);
        *(arr + j) = temp;
      }
    }
    else {
      pathcrawler_trace_full("-317","l.6, file ksmallest.c");
      lin_ite_body_8: ;
    }
    lin_for_action_3: j ++;
  }
  lin_for_break_1: ;
  int temp_0 = *(arr + (i + 1));
  *(arr + (i + 1)) = *(arr + high);
  *(arr + high) = temp_0;
  __retres = i + 1;
  return __retres;
}

int quickSelect(int *arr, int low, int high, int k)
{
  int __retres;
  int __tmp_lin_2;
  int __tmp_lin_1;
  int __tmp_lin_0;
  if (low <= high) {
    pathcrawler_trace_full("+335","l.20, file ksmallest.c");
    lin_ite_body_22:
    {
      __tmp_lin_0 = partition(arr,low,high);
      int pi = __tmp_lin_0;
      if (pi == k - 1) {
        pathcrawler_trace_full("+341","l.23, file ksmallest.c");
        lin_ite_body_12: {
                           __retres = *(arr + pi);
                           goto return_label;
                         }
      }
      else {
        pathcrawler_trace_full("-341","l.23, file ksmallest.c");
        lin_ite_body_13: ;
      }
      if (pi > k - 1) {
        pathcrawler_trace_full("+349","l.24, file ksmallest.c");
        lin_ite_body_17:
        {
          __tmp_lin_1 = quickSelect(arr,low,pi - 1,k);
          __retres = __tmp_lin_1;
          goto return_label;
        }
      }
      else {
        pathcrawler_trace_full("-349","l.24, file ksmallest.c");
        lin_ite_body_18: ;
      }
      __tmp_lin_2 = quickSelect(arr,pi + 1,high,k);
      __retres = __tmp_lin_2;
      goto return_label;
    }
  }
  else {
    pathcrawler_trace_full("-335","l.20, file ksmallest.c");
    lin_ite_body_23: ;
  }
  __retres = -1;
  return_label: return __retres;
}

int kthSmallest(int *arr, int size, int k)
{
  int __tmp_lin_3;
  __tmp_lin_3 = quickSelect(arr,0,size - 1,k);
  return __tmp_lin_3;
}

int main(void)
{
  int __retres;
  int arr[5] = {12, 3, 5, 7, 19};
  int n = (int)(sizeof(arr) / sizeof(arr[0]));
  int k = 2;
  kthSmallest(arr,n,k);
  __retres = 0;
  return __retres;
}


